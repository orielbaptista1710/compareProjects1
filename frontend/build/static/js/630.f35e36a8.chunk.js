"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[630],{2630:(e,s,r)=>{r.r(s),r.d(s,{default:()=>a});var n=r(5043),i=r(6213),l=r(9981),o=r(579);const t="http://localhost:5000",a=()=>{const[e,s]=(0,n.useState)([]),[r,a]=(0,n.useState)([]),[d,c]=(0,n.useState)("pending"),[p,h]=(0,n.useState)(!0),[j,x]=(0,n.useState)(""),[g,u]=(0,n.useState)(""),[m,v]=(0,n.useState)(""),[N,A]=(0,n.useState)(!1),[y,f]=(0,n.useState)(null),b=(0,l.Zp)(),k=localStorage.getItem("token"),P=function(e){return e?arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,o.jsx)("div",{className:"property-cover",children:(0,o.jsx)("img",{src:`${t}${e}`,alt:"Cover",loading:"lazy",onError:e=>{e.target.onerror=null,e.target.src="/placeholder-cover.jpg"}})}):Array.isArray(e)?(0,o.jsx)("div",{className:"media-grid",children:e.map(((e,s)=>{const r="object"===typeof e?e.src:e,n="object"===typeof e?"video"===e.type:r.includes(".mp4")||r.includes(".mov");return(0,o.jsx)("div",{className:"media-item",children:n?(0,o.jsx)("video",{controls:!0,children:(0,o.jsx)("source",{src:`${t}${r}`,type:`video/${r.split(".").pop()}`})}):(0,o.jsx)("img",{src:`${t}${r}`,alt:`Media ${s}`,onError:e=>{e.target.onerror=null,e.target.src="/placeholder-image.jpg"}})},s)}))}):null:null};(0,n.useEffect)((()=>{if(!k)return void b("/login");(async()=>{h(!0);try{const e="pending"===d?`${t}/api/admin/pending-properties`:`${t}/api/admin/all-properties`,{data:r}=await i.A.get(e,{headers:{Authorization:`Bearer ${k}`}});"pending"===d?s(r):a(r)}catch(l){var e,r,n;x((null===(e=l.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Failed to fetch properties"),401===(null===(n=l.response)||void 0===n?void 0:n.status)&&b("/login")}finally{h(!1)}})()}),[d,k,b]);return(0,o.jsxs)("div",{className:"admin-dashboard",children:[(0,o.jsxs)("div",{className:"admin-header",children:[(0,o.jsx)("h1",{children:"Admin Dashboard"}),(0,o.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to logout?")&&(localStorage.removeItem("token"),localStorage.removeItem("user"),b("/login"))},className:"logout-button",children:"Logout"})]}),j&&(0,o.jsx)("div",{className:"error-message",children:j}),g&&(0,o.jsx)("div",{className:"success-message",children:g}),(0,o.jsxs)("div",{className:"tabs",children:[(0,o.jsxs)("button",{className:"tab-button "+("pending"===d?"active":""),onClick:()=>c("pending"),children:["Pending Approvals (",e.length,")"]}),(0,o.jsx)("button",{className:"tab-button "+("all"===d?"active":""),onClick:()=>c("all"),children:"All Properties"})]}),p?(0,o.jsx)("p",{className:"loading-message",children:"Loading properties..."}):"pending"===d?(0,o.jsx)("div",{className:"properties-list",children:0===e.length?(0,o.jsx)("p",{className:"no-properties",children:"No properties pending approval"}):e.map((e=>{var r,n,l,d;return(0,o.jsxs)("div",{className:"property-card",children:[(0,o.jsx)("h3",{children:e.title}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Submitted by:"})," ",(null===(r=e.userId)||void 0===r?void 0:r.displayName)||"Unknown"]}),e.coverImage&&P(e.coverImage,!0),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Location:"})," ",e.state,", ",e.city,", ",e.locality]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Address:"})," ",e.address||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Description:"})," ",e.description||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Details:"})," ",e.long_description||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Possession Status:"})," ",e.possessionStatus||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Agent:"})," ",e.firstName||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Pincode:"})," ",e.pincode||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Price:"})," ",e.price||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Floor No:"})," ",e.floor||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Total No. of Floors:"})," ",e.totalFloors||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Property Age:"})," ",e.ageOfProperty||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Parkings:"})," ",e.parkings||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Facing:"})," ",e.facing||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"BHK:"})," ",e.bhk||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Bathrooms:"})," ",e.bathrooms||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Balconies:"})," ",e.balconies||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Furnishing:"})," ",e.furnishing||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Property Type:"})," ",e.propertyType||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Featured:"})," ",e.featured?"Yes":"No"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Amenities:"}),e.amenities]}),(null===(n=e.galleryImages)||void 0===n?void 0:n.length)>0&&(0,o.jsxs)("div",{className:"media-section",children:[(0,o.jsxs)("h4",{children:["Gallery Images (",e.galleryImages.length,")"]}),P(e.galleryImages)]}),(null===(l=e.floorplanImages)||void 0===l?void 0:l.length)>0&&(0,o.jsxs)("div",{className:"media-section",children:[(0,o.jsxs)("h4",{children:["Floor Plans (",e.floorplanImages.length,")"]}),P(e.floorplanImages)]}),(null===(d=e.mediaFiles)||void 0===d?void 0:d.length)>0&&(0,o.jsxs)("div",{className:"media-section",children:[(0,o.jsxs)("h4",{children:["Media Files (",e.mediaFiles.length,")"]}),P(e.mediaFiles)]}),(0,o.jsxs)("div",{className:"action-buttons",children:[(0,o.jsx)("button",{className:"approve-button",onClick:()=>(async e=>{try{await i.A.put(`${t}/api/admin/approve/${e}`,{},{headers:{Authorization:`Bearer ${k}`}}),s((s=>s.filter((s=>s._id!==e)))),a((s=>s.map((s=>s._id===e?{...s,status:"approved"}:s)))),u("Property approved successfully")}catch(o){var r,n,l;x((null===(r=o.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to approve property"),401===(null===(l=o.response)||void 0===l?void 0:l.status)&&b("/login")}})(e._id),children:"Approve"}),(0,o.jsx)("button",{className:"reject-button",onClick:()=>{return s=e._id,f(s),void A(!0);var s},children:"Reject"})]})]},e._id)}))}):(0,o.jsx)("div",{className:"properties-list",children:0===r.length?(0,o.jsx)("p",{className:"no-properties",children:"No properties found"}):r.map((e=>{var s,r;return(0,o.jsxs)("div",{className:"property-card",children:[(0,o.jsx)("h3",{children:e.title}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Developer:"})," ",e.firstName||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Location:"})," ",e.state,", ",e.city,", ",e.locality]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Address:"})," ",e.address||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Description:"})," ",e.description||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Details:"})," ",e.long_description||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Possession Status:"})," ",e.possessionStatus||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Pincode:"})," ",e.pincode||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Price:"})," ",e.price||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Floor No:"})," ",e.floor||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Total No. of Floors:"})," ",e.totalFloors||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Property Age:"})," ",e.ageOfProperty||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Parkings:"})," ",e.parkings||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Facing:"})," ",e.facing||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"BHK:"})," ",e.bhk||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Bathrooms:"})," ",e.bathrooms||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Balconies:"})," ",e.balconies||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Furnishing:"})," ",e.furnishing||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Property Type:"})," ",e.propertyType||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Amenities:"})," ",e.amenities||"N/A"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Status:"}),(0,o.jsxs)("span",{className:`status-${e.status}`,children:[e.status,"rejected"===e.status&&e.rejectionReason&&(0,o.jsxs)("span",{children:[" - ",e.rejectionReason]})]})]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Submitted by:"})," ",(null===(s=e.userId)||void 0===s?void 0:s.displayName)||"Unknown"]}),e.reviewedBy&&(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Reviewed by:"})," ",(null===(r=e.reviewedBy)||void 0===r?void 0:r.displayName)||"Admin"]})]},e._id)}))}),N&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsx)("h3",{children:"Reject Property"}),(0,o.jsx)("textarea",{placeholder:"Enter rejection reason...",value:m,onChange:e=>v(e.target.value)}),(0,o.jsxs)("div",{className:"modal-buttons",children:[(0,o.jsx)("button",{onClick:()=>{A(!1),v("")},children:"Cancel"}),(0,o.jsx)("button",{className:"confirm-reject",onClick:async()=>{if(m.trim())try{const{data:e}=await i.A.put(`${t}/api/admin/reject/${y}`,{rejectionReason:m},{headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}});s((e=>e.filter((e=>e._id!==y)))),a((e=>e.map((e=>e._id===y?{...e,status:"rejected",rejectionReason:m}:e)))),A(!1),v(""),x(""),alert(e.message)}catch(l){var e,r,n;console.error("Rejection error:",(null===(e=l.response)||void 0===e?void 0:e.data)||l.message),x((null===(r=l.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to reject property")}else x("Please provide a rejection reason")},children:"Confirm Reject"})]})]})})]})}}}]);
//# sourceMappingURL=630.f35e36a8.chunk.js.map